# CLAUDE.md

This file provides guidance to Claude Code when working with code in this repository.

## Project Overview

This is a TanStack Router monorepo template with React 19, Vite 7, and Tailwind CSS v4.

### Architecture
- **Structure**: pnpm + Turbo monorepo with shared packages
- **Frontend**: React 19 with TanStack Router (file-based routing)
- **Styling**: Tailwind CSS v4 + Shadcn/Base UI components
- **Build**: Vite 7 + Turbo

### Current Applications
- `apps/web/` — Example web application

## File Location Patterns & Key Directories

### Monorepo Structure
- `apps/` — Individual applications
- `packages/ui/` — Shared React UI components (Shadcn/Base UI style)
- `packages/typescript-config/` — Shared TypeScript configurations
- `packages/biome-config/` — Shared Biome linting configurations

### App Structure Pattern (example: `apps/web/`)
- `src/routes/` — TanStack Router file-based routes
- `src/components/` — App-specific React components
- `src/styles.css` — Global styles (imports Tailwind)
- `public/` — Static assets

### Important File Patterns
- `**/routeTree.gen.ts` — Auto-generated route tree (DO NOT EDIT)
- `src/routes/__root.tsx` — Root layout component
- `*.config.*` — Configuration files (Vite, Tailwind, etc.)

## Key Commands

### From Monorepo Root
```bash
pnpm dev                 # Start all apps via Turbo
pnpm build               # Build all packages/apps via Turbo
pnpm lint                # Lint all packages with Biome (auto-fix enabled)
pnpm format              # Format all packages with Biome
pnpm check               # Run Biome check (lint + format)
pnpm check-types         # Type check all packages via Turbo
```

### App-Specific Commands (from app directory)
```bash
pnpm dev                 # Start Vite dev server
pnpm build               # Build the application
pnpm preview             # Preview production build
pnpm test                # Run Vitest tests
```

## Development Environment Guidelines

### Server Management
- Apps run on their configured ports (web: 3000)
- Do not start additional development servers unless explicitly asked
- Assume the developer already has the environment running

### Auto-generated Files
- **NEVER EDIT**: `**/routeTree.gen.ts` (auto-generated by TanStack Router)
- These files update automatically when route files change

### Common Development Pain Points
- **Node Version**: Must use Node 20+ (specified in root package.json engines)
- **PNPM Version**: Locked to 10.26.0 for consistency
- **Turbo Cache**: May need clearing if builds behave unexpectedly (`rm -rf .turbo`)

## Architecture Overview

### Technology Stack
- **Package Manager**: pnpm (`pnpm@10.26.0`)
- **Build System**: Turbo + Vite 7
- **Frontend**: React 19
- **Routing**: TanStack Router (file-based routing with auto code-splitting)
- **Styling**: Tailwind CSS v4
- **UI Components**: Shadcn/Base UI via `@workspace/ui`
- **Icons**: Lucide React
- **Testing**: Vitest + Testing Library
- **Linting/Formatting**: Biome

### Key Architectural Decisions
1. **File-based Routing**: Routes are defined in `src/routes/` directory. TanStack Router auto-generates the route tree.
2. **Shared UI Package**: Components from `@workspace/ui` should be preferred over creating app-specific variants.
3. **CSS Variables**: Tailwind uses CSS variables for theming (configured in components.json).
4. **Path Aliases**: Use `@/` prefix for imports from `src/` directory within each app.

## Development Workflow & Best Practices

### Code Organization Principles
1. **Follow Local Patterns**: Study neighboring files and shared packages first
2. **Component Consistency**: Use `@workspace/ui` components when available
3. **No Manual Edits**: Never touch auto-generated route tree files

### Route Creation Pattern
```typescript
import { createFileRoute } from '@tanstack/react-router'

export const Route = createFileRoute('/path')({
  component: RouteComponent,
})

function RouteComponent() {
  return <div>Page content</div>
}
```

### Component Import Pattern
```typescript
import { Button } from "@workspace/ui/components/button"
import { cn } from "@workspace/ui/lib/utils"
```

### React Best Practices
- Use TanStack Router for navigation and data loading
- Minimize `useEffect` usage; compute during render when possible
- Use proper TypeScript types; avoid `any`

## UI/UX Guidelines

### Styling
- Use Tailwind CSS utility classes
- Follow existing spacing and color tokens
- Use CSS variables for theming consistency

### Component Library
- Base UI / Shadcn style components via `@workspace/ui`
- Lucide icons for iconography
- CVA (class-variance-authority) for component variants

## Conventions

### Code Style
- Directory naming: lower-case-dashed
- Components: PascalCase
- Hooks: camelCase starting with `use`
- Strict TypeScript; avoid `any`
- Use Biome for linting/formatting

### File Naming
- Route files: Match URL path structure
- Components: PascalCase.tsx
- Utilities: camelCase.ts

## Code Formatting

Always format code before completing work:
```bash
pnpm format              # Format with Biome
pnpm lint                # Lint and fix issues
```

## Testing

Run tests with Vitest:
```bash
pnpm test                # Run all tests (from app directory)
```

Testing utilities available:
- `@testing-library/react` for component testing
- `@testing-library/dom` for DOM queries
- `jsdom` for browser environment simulation

## References & Documentation

### Core Technologies
- **TanStack Router**: https://tanstack.com/router/latest
- **Vite**: https://vitejs.dev/
- **Tailwind CSS v4**: https://tailwindcss.com/
- **Base UI**: https://base-ui.com/
- **Shadcn UI**: https://ui.shadcn.com/
- **Biome**: https://biomejs.dev/
- **Vitest**: https://vitest.dev/
- **Turbo**: https://turbo.build/
